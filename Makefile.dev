
include ./Makefile.constants

COMMON_VARS = "export EMAIL=${TEST_EMAIL}"\
    "export STACK_NAME=${STACK_NAME}"\
    "export POSTGRES_USER=${POSTGRES_USER}"\
    "export POSTGRES_PASSWORD=${POSTGRES_PASSWORD}"\
    "export POSTGRES_USER_PASSWORD=${POSTGRES_USER_PASSWORD}"\
    "export POSTGRES_DB=${POSTGRES_DB}"\
    "export WEB_DEV_SERVER_PORT=${WEB_DEV_SERVER_PORT}"\
    "export API_SERVER_PORT=${API_SERVER_PORT}"\
    "export API_SERVER=${API_SERVER}"\
    "export COMM_SERVER_PORT=${COMM_SERVER_PORT}"\
    "export COMM_SERVER=${COMM_SERVER}"\
    "export CRON_SERVER_PORT=${CRON_SERVER_PORT}"\
    "export CRON_SERVER=${CRON_SERVER}"\
    "export KEYCLOAK_MAIN_CLIENT=${KEYCLOAK_MAIN_CLIENT}"\
    "export KEYCLOAK_API_CLIENT=${KEYCLOAK_API_CLIENT}"\
    "export KEYCLOAK_COMM_CLIENT=${KEYCLOAK_COMM_CLIENT}"\
    "export KEYCLOAK_CRON_CLIENT=${KEYCLOAK_CRON_CLIENT}"\
    "export KEYCLOAK_WEB_CLIENT=${KEYCLOAK_WEB_CLIENT}"\
    "export EDI_REGISTRY_ADDRESS=${EDI_REGISTRY_ADDRESS}"\
    "export WEB_IMAGE_NAME=${WEB_IMAGE_NAME}"\
    "export API_IMAGE_NAME=${API_IMAGE_NAME}"\
    "export COMM_IMAGE_NAME=${COMM_IMAGE_NAME}"\
    "export RABBITMQ_DEFAULT_USER=${RABBITMQ_DEFAULT_USER}"\
    "export RABBITMQ_DEFAULT_PASS=${RABBITMQ_DEFAULT_PASS}"\
    "export EDI_RABBIT_ADDRESS=${EDI_RABBIT_ADDRESS}"\
    "export RABBITMQ_HOST=${RABBITMQ_HOST}"\
    "export RABBITMQ_WEB_PORT=${RABBITMQ_WEB_PORT}"\
    "export RABBITMQ_SERVICE_PORT=${RABBITMQ_SERVICE_PORT}"\
    "export CRON_IMAGE_NAME=${CRON_IMAGE_NAME}"\
    "export CRON_DB=${CRON_DB}"\
    
ENV = printf "%s\n" \
	"\#!/bin/sh"\
    ${COMMON_VARS}\
    "export EDI_DATA=${HOME}${EDI_DATA}"\
    "export IMAGE_VERSION=${IMAGE_VERSION}"\
    "export DOMAIN=${DOMAIN}"\
    "export DB_DOMAIN=${EDI_DB_SUBDOMAIN}.${DOMAIN}"\
    "export API_DOMAIN=${EDI_API_SUBDOMAIN}.${DOMAIN}"\
    "export WEB_DOMAIN=${EDI_WEB_SUBDOMAIN}.${DOMAIN}"\
    "export KEYCLOAK_DOMAIN=${EDI_KEYCLOAK_SUBDOMAIN}.${DOMAIN}"\
    "export REGISTRY_DOMAIN=${EDI_REGISTRY_SUBDOMAIN}.${DOMAIN}"\
    "export RABBITMQ_DOMAIN=${EDI_RABBITMQ_SUBDOMAIN}.${DOMAIN}"\
    "export REDIRECT_URI=${REDIRECT_URI}"\
    "export SMTP_HOST=${SMTP_HOST}"\
    "export EDI_KEYCLOAK_ADDRESS=${EDI_KEYCLOAK_ADDRESS}"\
    "export KEYCLOAK_AUTH_URL=${KEYCLOAK_BASE_URL}"\
    "export ACME_EMAIL=${ACME_EMAIL}"\
    "export WEB_URL=${WEB_URL}"\
    "export API_URL=${API_URL}"\
    "export COMM_URL=${COMM_URL}"\
    "export CRON_URL=${CRON_URL}"\
    "export CERT=${CERT}"\
    "export CERT_PASSWORD=${CERT_PASSWORD}"\
    "export SSL_SECURE=true"\
    "export IMAGE_VERSION_SUFFIX=-lc"\
    "export API_LOG_LEVEL=INFO"\
    "export COMM_LOG_LEVEL=INFO"\
    "export CRON_LOG_LEVEL=INFO"\
    "export REGISTRY_TAG=${EDI_REGISTRY_SUBDOMAIN}.${DOMAIN}"\
    "export KEYCLOAK_REGISTRY_IMAGE=${KEYCLOAK_REGISTRY_IMAGE}"\
    "export POSTGRES_SERVER=${DB_URL}"\
    >> .env
